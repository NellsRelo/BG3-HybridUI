<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
					xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
					xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
					xmlns:b="http://schemas.microsoft.com/xaml/behaviors"
					xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
					xmlns:System="clr-namespace:System;assembly=mscorlib"
					xmlns:ls="clr-namespace:ls;assembly=Code"
					xmlns:noesis="clr-namespace:NoesisGUIExtensions;assembly=Noesis.GUI.Extensions"
					mc:Ignorable="d">

      <ControlTemplate x:Key="subRaceSelectionTemplate">
          <DockPanel>

                  <ContentControl x:Name="SubRaceOpeningDecorator" Template="{StaticResource HUI_SelectorHeader}" Grid.Row="0"/>
                  <ContentControl Template="{StaticResource HUI_CarouselHeaderDecorator}" Grid.Row="1">
                      <TextBlock ls:TextBlockFormatter.SourceText="{Binding SelectedSubRace.Name}" Style="{StaticResource PanelHeaderText}" HorizontalAlignment="Center"  Height="100" Margin="0,-10,0,10"/>
                  </ContentControl>

              <StackPanel x:Name="selectedRaceDescription" Orientation="Vertical" HorizontalAlignment="Center" DockPanel.Dock="Top">
                <TextBlock ls:TextBlockFormatter.SourceText="{Binding SelectedRace.Description}"  Style="{StaticResource PanelDescriptionText}"  FontSize="{StaticResource ScaledDefaultFontSize}" Foreground="{StaticResource CCTextNormal}" Margin="0,5,0,0"/>
                <TextBlock ls:TextBlockFormatter.SourceText="{Binding SelectedSubRace.Description}" Style="{StaticResource PanelDescriptionText}" FontSize="{StaticResource ScaledDefaultFontSize}" Foreground="{StaticResource CCTextNormal}" Margin="0,5,0,0"/>
            </StackPanel>
        </DockPanel>
    </ControlTemplate>

    <ControlTemplate x:Key="subRaceProgressionsTemplate">
          <Grid HorizontalAlignment="Left">
              <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="*" />
              </Grid.RowDefinitions>
              <StackPanel Grid.Row="0">
                  <Image Source="{StaticResource CarouselDecoration}" Stretch="None" Margin="0,-30,0,0" Height="108" HorizontalAlignment="Center" />
              </StackPanel>
          </Grid>
    </ControlTemplate>

    <ControlTemplate x:Key="subRaceDescriptionTemplate">
          <StackPanel Width="{StaticResource gameplayPanelWidth}" HorizontalAlignment="Left" DockPanel.Dock="Top">
              <ContentControl Template="{StaticResource PanelSideDescription}" VerticalAlignment="Top">
                <StackPanel>  
                <TextBlock x:Name="SelectionDescriptionRace" ls:TextBlockFormatter.SourceText="{Binding SelectedRace.Description}" Style="{StaticResource CarouselSideDescriptionTextSplitScreen}"/>
                <TextBlock x:Name="SelectionDescriptionSubRace" ls:TextBlockFormatter.SourceText="{Binding SelectedSubRace.Description}" Style="{StaticResource CarouselSideDescriptionTextSplitScreen}" Margin="0,20,0,0"/>
                  </StackPanel>
              </ContentControl>
          </StackPanel>

        <ControlTemplate.Triggers>
            <!-- Split Screen variation -->
            <DataTrigger Binding="{Binding Layout}" Value="Common">
                <Setter TargetName="SelectionDescriptionRace" Property="Style" Value="{StaticResource CarouselSideDescriptionText}"/>
                <Setter TargetName="SelectionDescriptionSubRace" Property="Style" Value="{StaticResource CarouselSideDescriptionText}"/>
            </DataTrigger>
        </ControlTemplate.Triggers>
  </ControlTemplate>

    <ControlTemplate x:Key="subRaceProgressionsTemplateSimplified">
          <StackPanel Style="{StaticResource gameplayScrolledStackPanelStyle}" VerticalAlignment="Stretch">
              <!-- SubRaces typically don't have complex progressions, but can show basic information -->
              <TextBlock Text="Subrace features and heritage would be displayed here" 
                        Style="{StaticResource PanelDescriptionText}" 
                        HorizontalAlignment="Center" 
                        Margin="0,20,0,20"/>
          </StackPanel>
    </ControlTemplate>

      
      <ControlTemplate x:Key="SubRaceSelectorTemplate">
          <DockPanel>
              <Grid>
                  <Grid.RowDefinitions>
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="*" />
                  </Grid.RowDefinitions>
                  <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="*" />
                  </Grid.ColumnDefinitions>

                  <b:Interaction.Triggers>
                      <!-- Auto-close any open grids when this template loads -->
                      <b:EventTrigger EventName="Loaded">
                          <b:ChangePropertyAction TargetName="CharacterCreation_c" PropertyName="Tag" Value="HideExpandedGrid"/>
                          <!-- Set initial focus to the name input -->
                          <ls:SetMoveFocusAction TargetName="CharacterCreation_c" FocusElement="{Binding ElementName=nameInput}"/>
                      </b:EventTrigger>
                  </b:Interaction.Triggers>

                  <Control Template="{StaticResource setGameplayCameraOffsets}"/>

                  <ContentControl x:Name="SubRaceOpeningDecorator" Template="{StaticResource HUI_SelectorHeader}" Grid.Row="0"/>
                  <ContentControl Template="{StaticResource HUI_CarouselHeaderDecorator}" Grid.Row="1">
                      <TextBlock ls:TextBlockFormatter.SourceText="{Binding SelectedSubRace.Name}" Style="{StaticResource PanelHeaderText}" HorizontalAlignment="Center"  Height="100" Margin="0,-10,0,10"/>
                  </ContentControl>
                  <!-- SubRace Description Content (Text-only, no selection grid) -->
                  <StackPanel x:Name="subRaceContentPanel" Grid.Row="2" Width="{StaticResource gameplayPanelWidth}" HorizontalAlignment="Left" Margin="0,20,0,0">
                      <StackPanel x:Name="selectedRaceDescription" Orientation="Vertical" HorizontalAlignment="Center">
                          <TextBlock ls:TextBlockFormatter.SourceText="{Binding SelectedRace.Description}"  
                                    Style="{StaticResource PanelDescriptionText}"  
                                    FontSize="{StaticResource ScaledDefaultFontSize}" 
                                    Foreground="{StaticResource CCTextNormal}" 
                                    Margin="0,5,0,0"/>
                          <TextBlock ls:TextBlockFormatter.SourceText="{Binding SelectedSubRace.Description}" 
                                    Style="{StaticResource PanelDescriptionText}" 
                                    FontSize="{StaticResource ScaledDefaultFontSize}" 
                                    Foreground="{StaticResource CCTextNormal}" 
                                    Margin="0,15,0,0"/>
                      </StackPanel>
                  </StackPanel>
                <StackPanel x:Name="ProgressionsHeader" Grid.Row="3" Width="{StaticResource gameplayPanelWidth}" HorizontalAlignment="Left">
                    <Image Source="{StaticResource CarouselDecoration}" Stretch="None" Margin="25,0,0,0" Height="108" HorizontalAlignment="Center" />
                </StackPanel>
              </Grid>
          </DockPanel>
      </ControlTemplate>

</ResourceDictionary>